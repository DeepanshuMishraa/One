#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Run ESLint and capture the output (without the --ext flag for flat config)
ESLINT_OUTPUT=$(npx eslint .)
ESLINT_EXIT_CODE=$?

# Check if there are errors (exit code 2 means errors were found)
if [ $ESLINT_EXIT_CODE -eq 2 ]; then
  echo "❌ ESLint found errors. Please fix them before committing."
  echo "$ESLINT_OUTPUT"
  exit 1
elif [ $ESLINT_EXIT_CODE -eq 1 ]; then
  echo "⚠️ ESLint found warnings, but no errors. Proceeding with commit."
  echo "$ESLINT_OUTPUT"
  exit 0
else
  echo "✅ ESLint check passed."
  exit 0
fi
